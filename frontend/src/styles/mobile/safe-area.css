/**
 * Safe Area Insets
 * Handles device notches, status bars, and home indicators
 * Supports iOS notch and Android gesture navigation
 */

:root {
  /* Safe area insets (from device) */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);

  /* Fallback insets for older browsers */
  --fallback-safe-top: 0px;
  --fallback-safe-right: 0px;
  --fallback-safe-bottom: 0px;
  --fallback-safe-left: 0px;
}

/* Apply safe area to body */
body {
  padding-top: var(--safe-area-top);
  padding-right: var(--safe-area-right);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
}

/* Safe area utility classes */
.safe-top {
  padding-top: var(--safe-area-top);
}

.safe-right {
  padding-right: var(--safe-area-right);
}

.safe-bottom {
  padding-bottom: var(--safe-area-bottom);
}

.safe-left {
  padding-left: var(--safe-area-left);
}

.safe-all {
  padding-top: var(--safe-area-top);
  padding-right: var(--safe-area-right);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
}

.safe-horizontal {
  padding-right: var(--safe-area-right);
  padding-left: var(--safe-area-left);
}

.safe-vertical {
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
}

/* Fixed header with safe area */
.fixed-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  padding-top: var(--safe-area-top);
  z-index: 100;
}

/* Fixed footer/bottom navigation with safe area */
.fixed-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding-bottom: var(--safe-area-bottom);
  z-index: 100;
}

/* Content with fixed header/footer */
.content-with-fixed-header {
  margin-top: calc(var(--header-height, 60px) + var(--safe-area-top));
}

.content-with-fixed-footer {
  margin-bottom: calc(var(--footer-height, 60px) + var(--safe-area-bottom));
}

/* Full-screen modal/overlay */
.fullscreen-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding-top: var(--safe-area-top);
  padding-right: var(--safe-area-right);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
}

/* iOS-specific safe area handling */
@supports (padding: env(safe-area-inset-top)) {
  /* iOS Safe Area supported */
  .ios-safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .ios-safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Viewport meta tag should be: */
/* <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"> */

/* Android gesture navigation bar (typically 48px) */
@media (min-height: 600px) {
  :root {
    --android-nav-bar-height: 48px;
  }
}

/* Landscape orientation adjustments */
@media (orientation: landscape) {
  .safe-landscape-left {
    padding-left: max(var(--safe-area-left), 20px);
  }

  .safe-landscape-right {
    padding-right: max(var(--safe-area-right), 20px);
  }
}

/* Bottom sheet with safe area */
.bottom-sheet {
  padding-bottom: var(--safe-area-bottom);
}

/* Tab bar with safe area */
.tab-bar {
  padding-bottom: var(--safe-area-bottom);
}

/* Ensure content doesn't overlap with notch in landscape */
@media (orientation: landscape) {
  .content-area {
    padding-left: var(--safe-area-left);
    padding-right: var(--safe-area-right);
  }
}

/* Debug mode (show safe area boundaries) */
.debug-safe-area .safe-all::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-top: 2px dashed red;
  border-right: 2px dashed red;
  border-bottom: 2px dashed red;
  border-left: 2px dashed red;
  pointer-events: none;
  z-index: 9999;
}
