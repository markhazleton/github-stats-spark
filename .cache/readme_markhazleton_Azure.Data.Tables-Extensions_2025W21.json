{
  "timestamp": "2026-01-04T08:36:05.986238",
  "value": "# Azure.Data.Tables Extensions\nExtensions for the Azure.Data.Tables library to easier access &amp; manipulate data inside Azure Table Storage.\n\nWith the CSV package you can easily import and export data from Azure Table Storage to CSV files.\n\n## NOTE\nIf you use this code for backups, please test both export and import functionality and verify that the data is correct. I am not responsible for any data loss.\n\n**A backup that you didn't test is not a backup.**\n\n## NuGet\n[![Nuget](https://img.shields.io/nuget/v/Medienstudio.Azure.Data.Tables.Extensions?label=Medienstudio.Azure.Data.Tables.Extensions%20on%20NuGet)](https://www.nuget.org/packages/Medienstudio.Azure.Data.Tables.Extensions/)\n\n[![Nuget](https://img.shields.io/nuget/v/Medienstudio.Azure.Data.Tables.CSV?label=Medienstudio.Azure.Data.Tables.CSV%20on%20NuGet)](https://www.nuget.org/packages/Medienstudio.Azure.Data.Tables.CSV/)\n\n## Querying\n\n```csharp\nusing Azure.Data.Tables;\nusing Medienstudio.Azure.Data.Tables.Extensions;\n\nTableServiceClient tableServiceClient = new(connectionString);\nTableClient tableClient = tableServiceClient.GetTableClient(\"tablename\");\n\n// Get all rows from the table\nList<TableEntity> entities = await tableClient.GetAllEntitiesAsync<TableEntity>();  \n\n// Get all rows by PartitionKey\nList<TableEntity> entities = await tableClient.GetAllEntitiesByPartitionKeyAsync<TableEntity>(\"MyPartitionKey\");\n\n// Get all rows by RowKey\nList<TableEntity> entities = await tableClient.GetAllEntitiesByRowKeyAsync<TableEntity>(\"MyRowKey\");\n\n// Get all entites where a column starts with a specific value\nList<TableEntity> entities = await _tableClient.GetAllEntitiesStartingWithAsync<TableEntity>(\"MyColumn\", \"abc\");\n\n// Get first entity in table (smallest PartitionKey + RowKey)\nTableEntity entity = await tableClient.GetFirstEntityAsync<TableEntity>();\n\n// Add list of entites (with auto-batching)\nList<TableEntity> entities = new(){...};\nawait tableClient.AddEntitiesAsync(entities);\n\n// Delete all rows from the table\nawait tableClient.DeleteAllEntitiesAsync();\n\n// Delete all rows by PartitionKey\nawait _tableClient.DeleteAllEntitiesByPartitionKeyAsync(\"123\");\n\n// Create a table if it does not exists without throwing a hidden Exception that Application Insights will track\nawait tableServiceClient.CreateTableIfNotExistsSafeAsync(tableName);\n\n// Count all rows in the table\nint count = await _tableClient.CountEntitiesAsync();\n// Count all rows by PartitionKey\nint count2 = await _tableClient.CountEntitiesAsync(partitionKey: \"MyPartitionKey\");\n```\n\n## CSV Export / Import\n\nThe CSV package aims support Azure Table Storage data import & export support for CSV exactly as the Azure Storage Explorer and the old Azure CLI v7 does it. Therefore exported files should be importable by the Azure Storage Explorer and the package can also read exports from ASE. \n\n```csharp\nusing Azure.Data.Tables;\nusing Medienstudio.Azure.Data.Tables.CSV;\n\nTableServiceClient tableServiceClient = new(connectionString);\nTableClient tableClient = tableServiceClient.GetTableClient(\"tablename\");\n\n// Export all rows from the table to a CSV file\nusing StreamWriter writer = File.CreateText(\"test.csv\");\nawait _tableClient.ExportCSVAsync(writer);\n\n// Export all rows as CSV to Azure BLob Storage\nBlobContainerClient containerClient = new(BlobConnectionString, \"testcontainer\");\nvar blobClient = containerClient.GetBlobClient(\"test.csv\");\nvar stream = await blobClient.OpenWriteAsync(true, new BlobOpenWriteOptions() { HttpHeaders = new BlobHttpHeaders { ContentType = \"text/csv\" } });\nusing StreamWriter writer = new(stream);\nawait _tableClient.ExportCSVAsync(writer);\n\n// Import all rows from a CSV file to the table\nusing StreamReader reader = new(\"test.csv\");\nawait _tableClient.ImportCSVAsync(reader);\n```\n"
}