{
  "timestamp": "2026-01-08T17:48:43.484897+00:00",
  "value": "# DecisionSpark\n\n[![.NET Version](https://img.shields.io/badge/.NET-10.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)\n[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)\n[![Build Status](https://img.shields.io/badge/build-passing-brightgreen.svg)]()\n[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](CONTRIBUTING.md)\n\n> A Dynamic Decision Routing Engine that uses conversation-style APIs to guide users through minimal questions and recommend optimal outcomes.\n\n## \ud83d\ude80 Overview\n\nDecisionSpark is a .NET 10 web application that implements a flexible, config-driven decision engine. It combines a RESTful API with an interactive Razor Pages web interface to guide users through intelligent conversations, asking minimal questions while evaluating responses against configurable rules to recommend optimal outcomes.\n\n### Example Use Case: Family Saturday Planner\n- **Ask**: \"How many people?\" \u2192 \"What ages?\"\n- **Evaluate**: group size, age ranges, derived traits\n- **Recommend**: Go Bowling / Movie Night / Go Golfing\n\n### Key Features\n\n\u2705 **Conversation-Driven API** - RESTful endpoints for starting and continuing decision sessions  \n\u2705 **Multiple Question Types** - Text input, single-select, and multi-select with options  \n\u2705 **OpenAI Integration** - Natural language question generation and answer parsing  \n\u2705 **Web UI Interface** - Interactive Razor Pages testing interface  \n\u2705 **Config-Driven Rules** - JSON-based decision specifications with no code changes  \n\u2705 **Intelligent Routing** - Rule-based evaluation with derived traits and tie-breaking  \n\u2705 **Session Management** - File-based conversation persistence  \n\u2705 **API Documentation** - Swagger/OpenAPI with interactive testing  \n\u2705 **Structured Logging** - Serilog with console and rolling file outputs  \n\n## \ud83d\udccb Table of Contents\n\n- [Architecture](#architecture)\n- [Prerequisites](#prerequisites)\n- [Getting Started](#getting-started)\n- [API Reference](#api-reference)\n- [Configuration](#configuration)\n- [Web UI](#web-ui)\n- [Decision Specs](#decision-specs)\n- [Development](#development)\n- [Testing](#testing)\n- [Deployment](#deployment)\n- [Contributing](#contributing)\n- [License](#license)\n\n## \ud83c\udfd7\ufe0f Architecture\n\n### Core Components\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    DecisionSpark Engine                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502   Web UI     \u2502  \u2502  API Layer   \u2502  \u2502    Swagger   \u2502      \u2502\n\u2502  \u2502 (Razor Pages)\u2502  \u2502 (REST API)   \u2502  \u2502   (OpenAPI)  \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502         \u2502                  \u2502                  \u2502               \u2502\n\u2502         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502\n\u2502                            \u2502                                  \u2502\n\u2502         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502         \u2502                                        \u2502            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502  Session    \u2502  \u2502   Question   \u2502  \u2502   Response   \u2502      \u2502\n\u2502  \u2502   Store     \u2502  \u2502  Generator   \u2502  \u2502    Mapper    \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502                           \u2502                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502   Routing   \u2502  \u2502    Trait     \u2502  \u2502   OpenAI     \u2502      \u2502\n\u2502  \u2502  Evaluator  \u2502  \u2502    Parser    \u2502  \u2502   Service    \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502                                                               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502          DecisionSpec Loader (JSON)                 \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\n### Key Services\n\n| Service | Purpose | Implementation |\n|---------|---------|----------------|\n| **DecisionSpecLoader** | Loads and validates JSON decision configurations | `FileSystemDecisionSpecLoader` |\n| **SessionStore** | Maintains conversation state | `InMemorySessionStore` |\n| **RoutingEvaluator** | Applies rules and determines outcomes | `RoutingEvaluator` |\n| **TraitParser** | Extracts structured data from user input | `TraitParser` |\n| **QuestionGenerator** | Phrases natural language questions | `OpenAIQuestionGenerator` |\n| **ResponseMapper** | Converts internal results to API contracts | `ResponseMapper` |\n| **OpenAIService** | Integration with OpenAI/Azure OpenAI | `OpenAIService` |\n| **ConversationPersistence** | Saves conversation history | `FileConversationPersistence` |\n\n## \ud83d\udce6 Prerequisites\n\n- **.NET 10 SDK** or later ([Download](https://dotnet.microsoft.com/download))\n- **Visual Studio 2022** (v17.12+) or **VS Code** with C# extension\n- **OpenAI API Key** or **Azure OpenAI** credentials (optional, has fallback mode)\n- **Git** for version control\n\n### Development Tools (Recommended)\n\n- **Postman** or **curl** for API testing\n- **Azure CLI** for Azure deployments\n- **Docker** (optional, for containerized deployment)\n\n## \ud83d\ude80 Getting Started\n\n### 1. Clone the Repository\n\n```bash\ngit clone https://github.com/markhazleton/DecisionSpark.git\ncd DecisionSpark\n```\n\n### 2. Configure Application Settings\n\nEdit `appsettings.json` or use User Secrets for sensitive data:\n\n```bash\ncd DecisionSpark\ndotnet user-secrets set \"OpenAI:ApiKey\" \"your-openai-api-key\"\ndotnet user-secrets set \"DecisionEngine:ApiKey\" \"your-custom-api-key\"\n```\n\n**Minimal Configuration** (`appsettings.json`):\n\n```json\n{\n  \"DecisionEngine\": {\n    \"ConfigPath\": \"Config/DecisionSpecs\",\n    \"DefaultSpecId\": \"TECH_STACK_ADVISOR_V1\",\n    \"ApiKey\": \"dev-api-key-change-in-production\"\n  },\n  \"OpenAI\": {\n    \"Provider\": \"OpenAI\",\n    \"ApiKey\": \"your-openai-api-key-here\",\n    \"Model\": \"gpt-4\",\n    \"EnableFallback\": true\n  }\n}\n```\n\n### 3. Build and Run\n\n```bash\ndotnet restore\ndotnet build\ndotnet run --project DecisionSpark\n```\n\nThe application will start at:\n- **HTTPS**: `https://localhost:5001`\n- **HTTP**: `http://localhost:5000`\n\n### 4. Access the Application\n\n- **Web UI**: `https://localhost:5001/`\n- **API Documentation**: `https://localhost:5001/swagger`\n- **About Page**: `https://localhost:5001/about`\n\n## \ud83d\udcda API Reference\n\n### Base URL\n\n```\nhttps://localhost:5001\n```\n\nAll API endpoints require the `X-API-KEY` header for authentication.\n\n### Authentication\n\n```http\nX-API-KEY: dev-api-key-change-in-production\n```\n\n### Endpoints\n\n#### Get Available Decision Specs\n\n```http\nGET /conversation/specs\n```\n\n**Response:**\n```json\n{\n  \"specs\": [\n    {\n      \"specId\": \"FAMILY_SATURDAY_V1\",\n      \"fileName\": \"FAMILY_SATURDAY_V1.1.0.0.active.json\",\n      \"displayName\": \"FAMILY SATURDAY V1\",\n      \"isDefault\": false\n    },\n    {\n      \"specId\": \"TECH_STACK_ADVISOR_V1\",\n      \"fileName\": \"TECH_STACK_ADVISOR_V1.0.0.0.active.json\",\n      \"displayName\": \"TECH STACK ADVISOR V1\",\n      \"isDefault\": true\n    }\n  ]\n}\n```\n\n#### Start a Decision Conversation\n\n```http\nPOST /conversation/start\nContent-Type: application/json\nX-API-KEY: your-api-key\n\n{\n  \"spec_id\": \"TECH_STACK_ADVISOR_V1\"\n}\n```\n\n**Response (Question):**\n```json\n{\n  \"texts\": [\"Let's find the best technology stack for your project.\"],\n  \"question\": {\n    \"id\": \"project_type\",\n    \"source\": \"TECH_STACK_ADVISOR_V1\",\n    \"text\": \"What type of project are you building?\",\n    \"type\": \"single-select\",\n    \"allowFreeText\": true,\n    \"isFreeText\": false,\n    \"options\": [\n      {\n        \"id\": \"web-app\",\n        \"label\": \"Web Application\",\n        \"value\": \"web-app\",\n        \"isNegative\": false\n      },\n      {\n        \"id\": \"mobile-app\",\n        \"label\": \"Mobile Application\",\n        \"value\": \"mobile-app\",\n        \"isNegative\": false\n      }\n    ]\n  },\n  \"next_url\": \"https://localhost:5001/conversation/abc123/next\"\n}\n```\n\n**Response (Final Recommendation):**\n```json\n{\n  \"is_complete\": true,\n  \"texts\": [\"Based on your requirements, here's my recommendation:\"],\n  \"display_cards\": [...],\n  \"care_type_message\": \"React with .NET Core API\",\n  \"final_result\": {\n    \"outcome_id\": \"REACT_DOTNET\",\n    \"resolution_button_label\": \"Get Started\",\n    \"resolution_button_url\": \"https://example.com/react-dotnet\",\n    \"analytics_resolution_code\": \"ROUTE_REACT_DOTNET\"\n  }\n}\n```\n\n#### Continue Conversation\n\n```http\nPOST /conversation/{sessionId}/next\nContent-Type: application/json\nX-API-KEY: your-api-key\n\n{\n  \"user_input\": \"web application\"\n}\n```\n\nOr with structured selection:\n\n```json\n{\n  \"selected_option_ids\": [\"web-app\"],\n  \"user_input\": \"I want to build a web app\"\n}\n```\n\n**Response:** Same structure as Start endpoint\n\n### Error Responses\n\n**Invalid Input (400):**\n```json\n{\n  \"error\": {\n    \"code\": \"INVALID_INPUT\",\n    \"message\": \"Could not parse response. Please provide a valid selection.\"\n  },\n  \"question\": { ...rephrased question... },\n  \"next_url\": \"...\"\n}\n```\n\n**Session Not Found (404):**\n```json\n{\n  \"error\": \"Session not found\"\n}\n```\n\n**Unauthorized (401):**\n```json\n{\n  \"error\": \"Invalid or missing API key\"\n}\n```\n\n## \u2699\ufe0f Configuration\n\n### Application Settings\n\n| Setting | Description | Default |\n|---------|-------------|---------|\n| `DecisionEngine:ConfigPath` | Path to decision spec JSON files | `Config/DecisionSpecs` |\n| `DecisionEngine:DefaultSpecId` | Default spec to use | `TECH_STACK_ADVISOR_V1` |\n| `DecisionEngine:ApiKey` | API authentication key | `dev-api-key-change-in-production` |\n| `OpenAI:Provider` | Provider type (`OpenAI` or `Azure`) | `OpenAI` |\n| `OpenAI:ApiKey` | OpenAI API key | - |\n| `OpenAI:Model` | Model to use | `gpt-4` |\n| `OpenAI:EnableFallback` | Use fallback if OpenAI unavailable | `true` |\n| `ConversationStorage:Path` | Path for conversation persistence | `conversations` |\n| `Serilog:LogDirectory` | Log file directory | `logs` |\n\n### OpenAI Configuration\n\n**OpenAI (Direct):**\n```json\n{\n  \"OpenAI\": {\n    \"Provider\": \"OpenAI\",\n    \"ApiKey\": \"sk-...\",\n    \"Model\": \"gpt-4\",\n    \"MaxTokens\": 500,\n    \"Temperature\": 0.7,\n    \"EnableFallback\": true\n  }\n}\n```\n\n**Azure OpenAI:**\n```json\n{\n  \"OpenAI\": {\n    \"Provider\": \"Azure\",\n    \"Endpoint\": \"https://your-resource.openai.azure.com\",\n    \"ApiKey\": \"your-azure-key\",\n    \"DeploymentName\": \"gpt-4\",\n    \"EnableFallback\": true\n  }\n}\n```\n\n## \ud83d\udda5\ufe0f Web UI\n\nDecisionSpark includes a full-featured Razor Pages web interface for testing and demonstrating the decision engine.\n\n### Features\n\n- \ud83d\udcdd **Interactive Conversation Interface** - Real-time question/answer flow\n- \ud83c\udfaf **Multiple Question Types** - Text inputs, single-select, and multi-select\n- \ud83d\udcca **Spec Selection** - Choose from available decision specifications\n- \ud83d\udd0d **Debug Console** - View session state and evaluation details\n- \ud83d\udcdc **Conversation History** - Track all questions and answers\n- \ud83d\udcbe **Session Persistence** - Save and resume conversations\n\n### Access\n\nNavigate to `https://localhost:5001/` to access the interactive testing interface.\n\n## \ud83d\udcdd Decision Specs\n\nDecision specifications are JSON configuration files that define the conversation flow and decision logic.\n\n### File Naming Convention\n\n```\n{SPEC_ID}.{MAJOR}.{MINOR}.{PATCH}.{BUILD}.active.json\n```\n\nExample: `TECH_STACK_ADVISOR_V1.0.0.0.active.json`\n\n### Spec Structure\n\n```json\n{\n  \"spec_id\": \"TECH_STACK_ADVISOR_V1\",\n  \"version\": \"1.0.0.0\",\n  \"metadata\": {\n    \"display_name\": \"Technology Stack Advisor\",\n    \"description\": \"Recommends optimal technology stacks\"\n  },\n  \"traits\": [\n    {\n      \"key\": \"project_type\",\n      \"question_text\": \"What type of project?\",\n      \"answer_type\": \"list\",\n      \"validation\": {\n        \"allowed_values\": [\"web\", \"mobile\", \"desktop\"]\n      }\n    }\n  ],\n  \"derived_traits\": [\n    {\n      \"key\": \"complexity_score\",\n      \"expression\": \"team_size * 2 + feature_count\"\n    }\n  ],\n  \"immediate_select_if\": [\n    {\n      \"condition\": \"project_type == legacy\",\n      \"outcome_id\": \"MAINTAIN_CURRENT\"\n    }\n  ],\n  \"outcomes\": [\n    {\n      \"outcome_id\": \"REACT_DOTNET\",\n      \"display_name\": \"React with .NET Core\",\n      \"selection_rules\": [\n        \"project_type == web\",\n        \"team_size >= 3\"\n      ]\n    }\n  ]\n}\n```\n\n### Available Specs\n\n1. **FAMILY_SATURDAY_V1** - Family activity planner\n2. **TECH_STACK_ADVISOR_V1** - Technology stack recommendations\n\n### Creating Custom Specs\n\n1. Create a new JSON file in `Config/DecisionSpecs/`\n2. Follow the naming convention\n3. Define traits, rules, and outcomes\n4. Update `DefaultSpecId` in `appsettings.json`\n\n## \ud83d\udee0\ufe0f Development\n\n### Project Structure\n\n```\nDecisionSpark/\n\u251c\u2500\u2500 Config/\n\u2502   \u2514\u2500\u2500 DecisionSpecs/              # JSON decision specifications\n\u251c\u2500\u2500 Controllers/\n\u2502   \u251c\u2500\u2500 ConversationController.cs   # API endpoints\n\u2502   \u2514\u2500\u2500 HomeController.cs           # Web UI controllers\n\u251c\u2500\u2500 Models/\n\u2502   \u251c\u2500\u2500 Api/                        # Request/Response DTOs\n\u2502   \u2502   \u251c\u2500\u2500 RequestModels.cs\n\u2502   \u2502   \u2514\u2500\u2500 ResponseModels.cs\n\u2502   \u251c\u2500\u2500 Runtime/                    # Session and evaluation models\n\u2502   \u2502   \u251c\u2500\u2500 DecisionSession.cs\n\u2502   \u2502   \u2514\u2500\u2500 EvaluationResult.cs\n\u2502   \u2514\u2500\u2500 Spec/                       # DecisionSpec models\n\u2502       \u2514\u2500\u2500 DecisionSpec.cs\n\u251c\u2500\u2500 Services/                       # Core business logic\n\u2502   \u251c\u2500\u2500 ISessionStore.cs\n\u2502   \u251c\u2500\u2500 IDecisionSpecLoader.cs\n\u2502   \u251c\u2500\u2500 IRoutingEvaluator.cs\n\u2502   \u251c\u2500\u2500 ITraitParser.cs\n\u2502   \u251c\u2500\u2500 IQuestionGenerator.cs\n\u2502   \u251c\u2500\u2500 IResponseMapper.cs\n\u2502   \u251c\u2500\u2500 IOpenAIService.cs\n\u2502   \u251c\u2500\u2500 OpenAIService.cs\n\u2502   \u251c\u2500\u2500 OpenAIQuestionGenerator.cs\n\u2502   \u2514\u2500\u2500 IConversationPersistence.cs\n\u251c\u2500\u2500 Middleware/\n\u2502   \u2514\u2500\u2500 ApiKeyAuthenticationMiddleware.cs\n\u251c\u2500\u2500 Views/                          # Razor Pages views\n\u2502   \u251c\u2500\u2500 Home/\n\u2502   \u2502   \u251c\u2500\u2500 Index.cshtml\n\u2502   \u2502   \u2514\u2500\u2500 About.cshtml\n\u2502   \u2514\u2500\u2500 Shared/\n\u2502       \u2514\u2500\u2500 Components/\n\u2502           \u2514\u2500\u2500 Questions/\n\u251c\u2500\u2500 Common/\n\u2502   \u2514\u2500\u2500 Constants.cs\n\u251c\u2500\u2500 Program.cs                      # Application startup\n\u2514\u2500\u2500 appsettings.json                # Configuration\n\ntests/\n\u2514\u2500\u2500 DecisionSpark.Tests/            # Unit and integration tests\n    \u251c\u2500\u2500 Services/\n    \u251c\u2500\u2500 Controllers/\n    \u2514\u2500\u2500 DecisionSpark.Tests.csproj\n```\n\n### Dependencies\n\n| Package | Version | Purpose |\n|---------|---------|---------|\n| Azure.AI.OpenAI | 2.1.0 | OpenAI and Azure OpenAI integration |\n| Serilog.AspNetCore | 10.0.0 | Structured logging |\n| Swashbuckle.AspNetCore | 9.0.6 | Swagger/OpenAPI documentation |\n\n### Building\n\n```bash\n# Restore dependencies\ndotnet restore\n\n# Build solution\ndotnet build\n\n# Build specific project\ndotnet build DecisionSpark/DecisionSpark.csproj\n```\n\n### Running Locally\n\n```bash\n# Run with default settings\ndotnet run --project DecisionSpark\n\n# Run with specific environment\ndotnet run --project DecisionSpark --environment Development\n\n# Watch mode (auto-reload on changes)\ndotnet watch run --project DecisionSpark\n```\n\n## \ud83e\uddea Testing\n\n### Test Framework\n\n- **xUnit** - Test runner\n- **Moq** - Mocking framework\n- **FluentAssertions** - Assertion library\n\n### Running Tests\n\n```bash\n# Run all tests\ndotnet test\n\n# Run with coverage\ndotnet test /p:CollectCoverage=true\n\n# Run specific test project\ndotnet test tests/DecisionSpark.Tests/DecisionSpark.Tests.csproj\n\n# Run tests with detailed output\ndotnet test --logger \"console;verbosity=detailed\"\n```\n\n### Test API with curl\n\n```bash\n# Get available specs\ncurl -X GET https://localhost:5001/conversation/specs \\\n  -H \"X-API-KEY: dev-api-key-change-in-production\" \\\n  -k\n\n# Start conversation\ncurl -X POST https://localhost:5001/conversation/start \\\n  -H \"Content-Type: application/json\" \\\n  -H \"X-API-KEY: dev-api-key-change-in-production\" \\\n  -d '{\"spec_id\": \"TECH_STACK_ADVISOR_V1\"}' \\\n  -k\n\n# Continue conversation\ncurl -X POST https://localhost:5001/conversation/{sessionId}/next \\\n  -H \"Content-Type: application/json\" \\\n  -H \"X-API-KEY: dev-api-key-change-in-production\" \\\n  -d '{\"user_input\": \"web application\"}' \\\n  -k\n```\n\n## \ud83d\ude80 Deployment\n\n### Local Deployment\n\n```bash\ndotnet publish -c Release -o ./publish\ncd publish\ndotnet DecisionSpark.dll\n```\n\n### Azure App Service\n\n```bash\n# Login to Azure\naz login\n\n# Create App Service\naz webapp create --name decisionspark \\\n  --resource-group myResourceGroup \\\n  --plan myAppServicePlan \\\n  --runtime \"DOTNET|10.0\"\n\n# Deploy\naz webapp deployment source config-zip \\\n  --resource-group myResourceGroup \\\n  --name decisionspark \\\n  --src ./publish.zip\n```\n\n### Docker\n\n```dockerfile\n# Example Dockerfile\nFROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base\nWORKDIR /app\nEXPOSE 80\nEXPOSE 443\n\nFROM mcr.microsoft.com/dotnet/sdk:10.0 AS build\nWORKDIR /src\nCOPY [\"DecisionSpark/DecisionSpark.csproj\", \"DecisionSpark/\"]\nRUN dotnet restore \"DecisionSpark/DecisionSpark.csproj\"\nCOPY . .\nWORKDIR \"/src/DecisionSpark\"\nRUN dotnet build \"DecisionSpark.csproj\" -c Release -o /app/build\n\nFROM build AS publish\nRUN dotnet publish \"DecisionSpark.csproj\" -c Release -o /app/publish\n\nFROM base AS final\nWORKDIR /app\nCOPY --from=publish /app/publish .\nENTRYPOINT [\"dotnet\", \"DecisionSpark.dll\"]\n```\n\n### Production Configuration\n\n**Use Azure Key Vault or User Secrets for sensitive data:**\n\n```bash\n# Set up User Secrets\ndotnet user-secrets init --project DecisionSpark\ndotnet user-secrets set \"OpenAI:ApiKey\" \"your-prod-key\" --project DecisionSpark\ndotnet user-secrets set \"DecisionEngine:ApiKey\" \"your-prod-api-key\" --project DecisionSpark\n```\n\n**Environment Variables:**\n\n```bash\nexport DecisionEngine__ApiKey=\"your-secure-api-key\"\nexport OpenAI__ApiKey=\"your-openai-key\"\nexport ASPNETCORE_ENVIRONMENT=\"Production\"\n```\n\n## \ud83e\udd1d Contributing\n\nContributions are welcome! Please follow these guidelines:\n\n1. **Fork the repository**\n2. **Create a feature branch** (`git checkout -b feature/AmazingFeature`)\n3. **Commit your changes** (`git commit -m 'Add some AmazingFeature'`)\n4. **Push to the branch** (`git push origin feature/AmazingFeature`)\n5. **Open a Pull Request**\n\n### Development Focus Areas\n\n- \ud83d\udd27 Enhanced rule expression engine\n- \ud83c\udf10 Additional trait parsers\n- \ud83e\uddea Expanded test coverage\n- \ud83d\udcca Analytics and telemetry\n- \ud83d\udd04 Redis session persistence\n- \ud83c\udfaf LLM-powered tie resolution\n- \u23ee\ufe0f `/prev` endpoint for backwards navigation\n- \ud83d\udc65 Admin API for spec management\n\n### Code Style\n\n- Follow standard C# naming conventions\n- Use XML documentation comments for public APIs\n- Maintain existing code structure and patterns\n- Write unit tests for new features\n- Update documentation for API changes\n\n## \ud83d\udcc4 License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n\n## \ud83d\ude4f Acknowledgments\n\n- Built with **.NET 10** and **ASP.NET Core**\n- Powered by **Azure AI OpenAI** SDK\n- Structured logging with **Serilog**\n- API documentation via **Swagger/OpenAPI**\n- Testing with **xUnit**, **Moq**, and **FluentAssertions**\n\n## \ud83d\udce7 Contact\n\n**Mark Hazleton** - [GitHub](https://github.com/markhazleton)\n\n**Project Link**: [https://github.com/markhazleton/DecisionSpark](https://github.com/markhazleton/DecisionSpark)\n\n---\n\n**DecisionSpark** - Smart decisions through minimal questions. \ud83c\udfaf\n",
  "hash": "b2c3bfa5a91026b761cd7f429fe0f2a4270e837d756b26844f9a435e387b5a53",
  "metadata": {
    "repository": {
      "owner": "markhazleton",
      "name": "DecisionSpark"
    },
    "category": "readme",
    "pushed_at": "2025-12-27T20:30:21+00:00",
    "ttl_enforced": false
  },
  "category": "readme",
  "owner": "markhazleton",
  "repo": "DecisionSpark",
  "week": "2025-12-27T20-30-21+00-00"
}