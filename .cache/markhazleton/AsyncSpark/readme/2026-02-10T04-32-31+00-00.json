{
  "timestamp": "2026-02-15T00:47:23.844829+00:00",
  "value": "# AsyncSpark\n\nProduction-ready reference implementation for async/await patterns in .NET 10 with constitution-driven development practices.\n\n[![Build and deploy ASP.Net Core app to Azure Web App - AsyncSpark](https://github.com/markhazleton/AsyncSpark/actions/workflows/main_AsyncSpark.yml/badge.svg)](https://github.com/markhazleton/AsyncSpark/actions/workflows/main_AsyncSpark.yml)\n\n## Overview\n\nAsyncSpark demonstrates enterprise-grade async programming patterns with enforced quality standards, automated compliance auditing, and interactive API documentation. Built on .NET 10 with 80% code coverage enforcement in CI/CD.\n\n**Live Demo**: [asyncspark.azurewebsites.net](https://asyncspark.azurewebsites.net/) | **API Docs**: [/scalar/v1](https://asyncspark.azurewebsites.net/scalar/v1)\n\n## Key Features\n\n- **Constitution-Driven Development**: Formalized coding standards enforced through automated audits\n- **80% Code Coverage Enforcement**: CI/CD fails if coverage drops below threshold\n- **Modern .NET 10**: Nullable reference types, implicit usings, file-scoped namespaces, primary constructors\n- **Async Best Practices**: ConfigureAwait(false) in all library code, proper CancellationToken usage, no blocking calls\n- **Resilience Patterns**: Polly integration via WebSpark.HttpClientUtility with retry, timeout, and circuit breaker policies\n- **Clean Architecture**: Dependency injection, decorator pattern, interface-based design\n- **Interactive API Documentation**: Scalar-powered API explorer with live testing\n- **SpecKit Development Workflow**: Constitution validation, automated audits, PR reviews, feature planning\n\n## Project Structure\n\n```\nAsyncSpark/                    # Core library - async utilities and services\nAsyncSpark.Web/               # ASP.NET Core web application with API endpoints\nAsyncSpark.Weather/           # Weather service integration demonstrating external API patterns\nAsyncSpark.Tests/             # MSTest + Moq unit tests\nAsyncSpark.Console/           # Console application demos\n.documentation/               # Constitution, guides, templates, audit reports\n.github/                      # CI/CD workflows, SpecKit agents, Copilot instructions\n.editorconfig                # C# code style enforcement\n```\n\n## Learning Objectives\n\nEach pattern links to specific code implementing the technique:\n\n### 1. ConfigureAwait(false) in Library Code\n**Implementation**: [HttpGetCallService.cs:24](AsyncSpark/HttpGetCall/HttpGetCallService.cs#L24), [OpenWeatherMapWeatherService.cs:31](AsyncSpark.Weather/Services/OpenWeatherMapWeatherService.cs#L31)  \n**Pattern**: All library async methods use `.ConfigureAwait(false)` to prevent deadlocks when consumed by UI threads.  \n**Test**: [HttpGetCallServiceTests.cs](AsyncSpark.Tests/HttpGetCall/HttpGetCallServiceTests.cs)\n\n### 2. CancellationToken Threading\n**Implementation**: [RemoteController.cs:26](AsyncSpark.Web/Controllers/Api/RemoteController.cs#L26), [AsyncMockService.cs:112](AsyncSpark/Services/AsyncMockService.cs#L112)  \n**Pattern**: CancellationToken passed from HTTP request through entire call chain for graceful cancellation.  \n**Test**: [CancellationPatternsControllerTests.cs](AsyncSpark.Tests/Controllers/CancellationPatternsControllerTests.cs)\n\n### 3. Task.WhenAll for Parallel Execution\n**Implementation**: [BulkCallsController.cs:62](AsyncSpark.Web/Controllers/BulkCallsController.cs#L62), [ConcurrencyPatternsController.cs:149](AsyncSpark.Web/Controllers/Api/ConcurrencyPatternsController.cs#L149)  \n**Pattern**: Execute multiple async operations concurrently and wait for all completions.  \n**Test**: [ConcurrencyPatternsControllerTests.cs](AsyncSpark.Tests/Controllers/ConcurrencyPatternsControllerTests.cs)\n\n### 4. SemaphoreSlim for Throttling\n**Implementation**: [BulkCallsController.cs:28](AsyncSpark.Web/Controllers/BulkCallsController.cs#L28)  \n**Pattern**: Limit concurrent operations with SemaphoreSlim to prevent resource exhaustion.  \n**Test**: Demonstrated in concurrency controller tests\n\n### 5. Polly Resilience Policies\n**Implementation**: [Program.cs:26](AsyncSpark.Web/Program.cs#L26) via WebSpark.HttpClientUtility  \n**Pattern**: Retry with exponential backoff, timeouts, circuit breakers for external API calls.  \n**Test**: [PollyResilienceTests.cs](AsyncSpark.Tests/Resilience/PollyResilienceTests.cs)\n\n### 6. Decorator Pattern for Cross-Cutting Concerns\n**Implementation**: [HttpGetCallServiceTelemetry.cs](AsyncSpark/HttpGetCall/HttpGetCallServiceTelemetry.cs), [Program.cs:74](AsyncSpark.Web/Program.cs#L74)  \n**Pattern**: Wrap services with decorators for logging, telemetry, caching without modifying business logic.  \n**Constitution**: Principle IV mandates decorator pattern for cross-cutting concerns\n\n### 7. Fire-and-Forget with Safety\n**Implementation**: [FireAndForgetUtility.cs](AsyncSpark/FireAndForget/FireAndForgetUtility.cs)  \n**Pattern**: Safely execute fire-and-forget tasks with exception handling and logging.  \n**Test**: [AsyncFireAndForgetUtilityTests.cs](AsyncSpark.Tests/FireAndForget/AsyncFireAndForgetUtilityTests.cs)\n\n### 8. No Blocking Calls\n**All Controllers**: Never use `.Result`, `.Wait()`, or `.GetAwaiter().GetResult()` - always `await`.  \n**Enforcement**: .editorconfig rule CA2007 treats missing async patterns as errors.\n\n## Constitution-Driven Development\n\nAsyncSpark uses a formalized constitution to enforce coding standards and architectural patterns.\n\n**Constitution**: [.documentation/memory/constitution.md](.documentation/memory/constitution.md)  \n**Version**: 1.0.0 | **Ratified**: 2026-02-09\n\n### Five Core Principles\n\n1. **Modern .NET Standards**: .NET 10+, nullable reference types, implicit usings, file-scoped namespaces\n2. **Async/Await Best Practices**: ConfigureAwait(false) in libraries, CancellationToken threading, no blocking calls\n3. **Testing Standards**: MSTest + Moq, 80% code coverage enforced in CI/CD, AAA pattern\n4. **Dependency Injection & Architecture**: Interface-based design, constructor injection with null validation, decorator pattern\n5. **Resilience, Documentation & Logging**: Polly policies, XML documentation, structured logging with ILogger<T>\n\n### Automated Compliance\n\n- **Site Audit**: `/speckit.site-audit` - Comprehensive codebase audit against constitution\n- **PR Review**: `/speckit.pr-review` - Constitution-aware pull request reviews\n- **CI/CD Enforcement**: GitHub Actions fails builds on coverage < 80% or async violations\n- **Audit Reports**: [.documentation/copilot/audit/](.documentation/copilot/audit/)\n\n**Latest Audit**: [2026-02-09_results.md](.documentation/copilot/audit/2026-02-09_results.md) - 90% Constitution compliance\n\n## API Documentation with Scalar\n\nInteractive API documentation using Scalar v2.12.36 with OpenAPI 3.1 specification.\n\n**Endpoints**:\n- Interactive Docs: `/scalar/v1`\n- OpenAPI Spec: `/openapi/v1.json`\n- Live Demo: [asyncspark.azurewebsites.net/scalar/v1](https://asyncspark.azurewebsites.net/scalar/v1)\n\n**Features**: Dark/light mode, auto-generated code examples (C#, JavaScript, Python, cURL, HTTP), tag-based organization, live request testing, mobile-friendly\n\n### API Endpoint Categories\n\n**Cancellation Patterns** (`/api/cancellation/*`) - Timeout, cancellation, linked tokens, cleanup patterns  \n**Concurrency Patterns** (`/api/concurrency/*`) - Sequential vs parallel vs throttled execution comparisons  \n**Remote Operations** (`/api/remote/*`) - Timeout and retry pattern demonstrations  \n**Weather Patterns** (`/api/weather/*`) - Real OpenWeatherMap API integration with caching, retry, parallel calls  \n**Health & Status** (`/health`, `/status`, `/api/status`) - Health checks, application status, build version\n\n**Detailed Documentation**: [API_LEARNING_GUIDE.md](.documentation/guides/API_LEARNING_GUIDE.md)\n\n## Technology Stack\n\n**Framework**: .NET 10.0  \n**Web**: ASP.NET Core MVC + Web API  \n**Testing**: MSTest 4.1.0, Moq 4.20.72, coverlet.collector 6.0.4 (80% coverage enforced)  \n**Resilience**: Polly 8.6.5, Microsoft.Extensions.Http.Resilience 10.2.0  \n**HTTP Utilities**: WebSpark.HttpClientUtility 2.2.0 (caching, telemetry, resilience)  \n**API Documentation**: Scalar.AspNetCore 2.12.36, Microsoft.AspNetCore.OpenApi 10.0.2  \n**Azure**: Azure.Identity 1.17.1 (Key Vault integration)  \n**UI**: WebSpark.Bootswatch 1.34.0 (theme switcher)  \n**Markdown**: Westwind.AspNetCore.Markdown 3.31.0  \n**External API**: OpenWeatherMap\n\n**Development Tools**: User Secrets, Docker support (Linux), npm integration for frontend assets, .editorconfig\n## Getting Started\n\n### Prerequisites\n- .NET 10 SDK\n- Node.js 20+ (for npm build)\n- (Optional) OpenWeatherMap API key for weather endpoints\n\n### Quick Start\n\n```bash\n# Clone repository\ngit clone https://github.com/markhazleton/AsyncSpark.git\ncd AsyncSpark\n\n# Install npm dependencies\ncd AsyncSpark.Web\nnpm ci\n\n# Configure OpenWeatherMap API key (optional)\ndotnet user-secrets set \"OpenWeatherMapApiKey\" \"your-api-key-here\"\ncd ..\n\n# Build solution\ndotnet build --configuration Release\n\n# Run tests with coverage\ndotnet test --configuration Release --collect:\"XPlat Code Coverage\"\n\n# Run web application\ndotnet run --project AsyncSpark.Web\n```\n\n### Explore the Application\n\n1. **API Documentation**: Navigate to `https://localhost:5001/scalar/v1`\n2. **Test Endpoints**: Use Scalar UI to execute live API requests\n3. **Health Check**: Visit `/health` for application health status\n4. **Status Page**: Visit `/status` for build version and configuration\n\n### Run Constitution Audit\n\n```bash\n# In GitHub Copilot Chat\n/speckit.site-audit\n```\n\nGenerates comprehensive audit report in `.documentation/copilot/audit/` validating:\n- Async/await best practices compliance\n- ConfigureAwait(false) usage in library code\n- Code coverage percentages\n- XML documentation coverage\n- Dependency vulnerabilities\n- Constitution principle adherence\n\n## CI/CD Pipeline\n\n**GitHub Actions**: [.github/workflows/main_asyncspark.yml](.github/workflows/main_asyncspark.yml)\n\n**Build Steps**:\n1. Checkout code\n2. Setup .NET 10\n3. Setup Node.js 20\n4. Install npm dependencies (`npm ci`)\n5. Build solution (`dotnet build`)\n6. **Run tests with coverage collection**\n7. **Validate 80% coverage threshold** (build fails if < 80%)\n8. Publish artifacts\n9. Deploy to Azure App Service\n\n**Enforcement**: Pull requests cannot merge without passing coverage threshold.\n\n## SpecKit Development Workflow\n\nSpecKit agents provide constitution-aware development assistance:\n\n- `/speckit.constitution` - Create or update coding standards\n- `/speckit.site-audit` - Comprehensive codebase audit\n- `/speckit.pr-review` - Constitution-aware PR reviews\n- `/speckit.specify` - Create feature specifications\n- `/speckit.plan` - Generate implementation plans\n- `/speckit.tasks` - Break down work into actionable tasks\n- `/speckit.implement` - Execute tasks with validation\n- `/speckit.quickfix` - Rapid fixes with constitution validation\n\n**Documentation**: [.github/agents/](.github/agents/), [.github/prompts/](.github/prompts/)\n\n## Additional Resources\n\n**Async Programming**:\n- [Cancellation Tokens in C#](https://markhazleton.com/cancellation-token.html) - Mark Hazleton\n- [Async and Decorator Pattern](https://markhazleton.com/decorator-pattern-http-client.html) - Mark Hazleton\n- [Await and UI Deadlocks](https://devblogs.microsoft.com/pfxteam/await-and-ui-and-deadlocks-oh-my/) - Microsoft\n- [Stop Calling .Result](https://montemagno.com/c-sharp-developers-stop-calling-dot-result/) - James Montemagno\n\n**Polly Resilience**:\n- [Polly Project](http://www.thepollyproject.org/) - Official documentation\n- [Retry and Circuit Breaker Patterns](https://medium.com/@therealjordanlee/retry-circuit-breaker-patterns-in-c-with-polly-9aa24c5fe23a)\n\n**API Documentation**:\n- [Scalar GitHub](https://github.com/scalar/scalar) - Modern API reference tool\n- [Microsoft OpenAPI Docs](https://learn.microsoft.com/aspnet/core/fundamentals/openapi)\n\n## License\n\nMIT License - See [LICENSE.txt](LICENSE.txt) for details\n\n## Author\n\n**Mark Hazleton**  \nWebsite: [markhazleton.com](https://markhazleton.com)  \nEmail: mark.hazleton@controlorigins.com  \nGitHub: [@markhazleton](https://github.com/markhazleton)\n\n---\n\n**AsyncSpark** - Production-ready async patterns for .NET 10 | Built with constitution-driven development | API documentation powered by Scalar\n\n",
  "hash": "dfb89c01b3a3be26c49a532e45ac28eaa942c0db39e592050b194ef998e72293",
  "metadata": {
    "repository": {
      "owner": "markhazleton",
      "name": "AsyncSpark"
    },
    "category": "readme",
    "pushed_at": "2026-02-10T04:32:31+00:00",
    "ttl_enforced": false
  },
  "category": "readme",
  "owner": "markhazleton",
  "repo": "AsyncSpark",
  "week": "2026-02-10T04-32-31+00-00"
}