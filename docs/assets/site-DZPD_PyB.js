const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/site-CFZyYFYM.js","assets/site-DnIXTUhv.js","assets/site-Dp0kJvEn.js","assets/site-DI9vlx2_.js","assets/site-Cb8s9CfR.js","assets/site-6iOB5wtc.js"])))=>i.map(i=>d[i]);
import{P as e,d as s,L as t,_ as a}from"./site-DI9vlx2_.js";import{j as i,r,C as o,a as l}from"./site-DnIXTUhv.js";const n={"C#":"#178600",TypeScript:"#3178c6",JavaScript:"#f1e05a",Python:"#3572A5",HTML:"#e34c26",CSS:"#563d7c",SCSS:"#c6538c",PHP:"#4F5D95","Visual Basic .NET":"#945db7",Unknown:"#586069"};function c(e){return n[e]||"#586069"}function d({label:e,value:s,sublabel:t}){return i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-card-value",children:s}),i.jsx("div",{className:"stat-card-label",children:e}),t&&i.jsx("div",{className:"stat-card-sublabel",children:t})]})}function h({repositories:e}){const s=e.length,t=e.reduce((e,s)=>e+(s.total_commits||0),0),a=[...new Set(e.map(e=>e.language).filter(Boolean))],r=e.reduce((e,s)=>e+(s.composite_score||0),0)/s,o=e.filter(e=>(e.recent_commits_90d||0)>0).length;return i.jsxs("div",{className:"stat-cards-grid",children:[i.jsx(d,{label:"Repositories",value:s}),i.jsx(d,{label:"Total Commits",value:t.toLocaleString(),sublabel:`${o} active in 90d`}),i.jsx(d,{label:"Languages",value:a.length}),i.jsx(d,{label:"Avg Spark Score",value:r.toFixed(1),sublabel:"out of 100"})]})}h.propTypes={repositories:e.array.isRequired},o.register(...l);const p={responsive:!0,maintainAspectRatio:!1,devicePixelRatio:window.devicePixelRatio||1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"bottom",labels:{padding:16,font:{size:14},usePointStyle:!0,boxWidth:8,boxHeight:8}},tooltip:{enabled:!0,mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,cornerRadius:8,padding:12,displayColors:!0,callbacks:{title:e=>e[0]?.label||"",label:e=>{const s=e.dataset.label||"",t=null!==e.parsed.y?e.parsed.y:e.parsed;return`${s}: ${"number"==typeof t?t.toLocaleString():t}`}},position:"average",yAlign:"bottom",xAlign:"center"}},scales:{x:{grid:{display:!1},ticks:{font:{size:12},maxRotation:45,minRotation:0,autoSkip:!0,maxTicksLimit:10}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:12},callback:e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e}}},animation:{duration:750,easing:"easeInOutQuart"}};const u=new class{constructor(){this.touchTimeout=null,this.touchStartTime=0,this.touchPosition=null}beforeEvent(e,s){const t=s.event;if("touchstart"===t.type)this.touchStartTime=Date.now(),this.touchPosition={x:t.x,y:t.y},this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>{if(e.tooltip){const s=e.getElementsAtEventForMode(t,"nearest",{intersect:!1},!1);s.length>0&&(e.tooltip.setActiveElements(s),e.update("none"))}},300);else if("touchmove"===t.type){if(this.touchPosition){Math.sqrt(Math.pow(t.x-this.touchPosition.x,2)+Math.pow(t.y-this.touchPosition.y,2))>10&&clearTimeout(this.touchTimeout)}}else"touchend"!==t.type&&"touchcancel"!==t.type||(clearTimeout(this.touchTimeout),this.touchPosition=null)}},m=({type:e,data:a,options:l={},title:n,enableHorizontalScroll:c=!0,maxDataPoints:d=10,loading:h=!1,error:m=null,emptyMessage:g="No data to display",className:x=""})=>{const{width:b,height:f}=((e={})=>{const{minHeight:t=300,maxHeight:a=600,mobileAspectRatio:i=1.5,desktopAspectRatio:o=2,breakpoint:l=768}=e,[n,c]=r.useState({width:window.innerWidth,height:t});return r.useEffect(()=>{const e=()=>{const e=window.innerWidth<l,s=Math.min(window.innerWidth-32,1200);let r=s/(e?i:o);r=Math.max(t,Math.min(a,r)),c({width:s,height:r})},r=s(e,150);return e(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[t,a,i,o,l]),n})({minHeight:300,maxHeight:500,mobileAspectRatio:1.2,desktopAspectRatio:2.5}),y=r.useRef(null),j=c&&a?.labels?.length>d,v=r.useMemo(()=>{if(j&&a?.labels?.length){const e=window.innerWidth<768?60:80,s=a.labels.length*e;return Math.max(b,s)}return b},[j,a?.labels?.length,b]),w=j?a:{...a,labels:a?.labels?.slice(0,d)||[],datasets:a?.datasets?.map(e=>({...e,data:e.data?.slice(0,d)||[]}))||[]},{canvasRef:k}=(e=>{const t=r.useRef(null),a=r.useRef(null),[i,l]=r.useState(!1),{type:n,data:c,options:d={},enableTouchAndHold:h=!0,debounceDelay:g=150}=e,x=r.useCallback(()=>{const e={...p,...d,plugins:{...p.plugins,...d.plugins,tooltip:{...p.plugins.tooltip,...d.plugins?.tooltip},legend:{...p.plugins.legend,...d.plugins?.legend}},scales:{...p.scales,...d.scales}};return"pie"!==n&&"doughnut"!==n||delete e.scales,e},[n,d]),b=r.useCallback(()=>{if(t.current&&c){a.current&&a.current.destroy();try{const e=t.current.getContext("2d"),s={type:n,data:c,options:x(),plugins:h?[u]:[]};a.current=new o(e,s),l(!0)}catch(m){}}},[n,c,x,h]),f=r.useCallback(e=>{if(a.current)try{a.current.data=e,a.current.update("active")}catch(m){}},[]),y=r.useCallback(()=>{a.current&&(a.current.destroy(),a.current=null,l(!1))},[]);return r.useEffect(()=>{const e=s(()=>{a.current&&a.current.resize()},g);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[g]),r.useEffect(()=>{const e=setTimeout(()=>{b()},0);return()=>{clearTimeout(e),y()}},[b,y]),r.useEffect(()=>{i&&c&&f(c)},[c,i,f]),{canvasRef:t,updateChart:f,destroyChart:y,isReady:i}})({type:e,data:w,options:{...l,maintainAspectRatio:!1},enableTouchAndHold:!0,debounceDelay:150});if(h)return i.jsxs("div",{className:`chart-wrapper ${x}`,children:[n&&i.jsx("h3",{className:"chart-title",children:n}),i.jsx("div",{className:"chart-loading",children:i.jsx(t,{type:"chart"})})]});if(m)return i.jsxs("div",{className:`chart-wrapper ${x}`,children:[n&&i.jsx("h3",{className:"chart-title",children:n}),i.jsxs("div",{className:"chart-error",children:[i.jsx("p",{children:"⚠️ Error loading chart"}),i.jsx("p",{className:"chart-error-message",children:m})]})]});return a&&(a.labels&&a.labels.length>0||a.datasets&&a.datasets.length>0&&a.datasets.some(e=>e.data&&e.data.length>0))?i.jsxs("div",{className:`chart-wrapper ${x}`,children:[n&&i.jsx("h3",{className:"chart-title",children:n}),j&&i.jsx("div",{className:"chart-scroll-hint",children:"← Scroll to see more data →"}),i.jsx("div",{ref:y,className:"chart-container "+(j?"chart-scrollable":""),style:{height:`${f}px`},children:i.jsx("div",{className:"chart-canvas-wrapper",style:{width:j?`${v}px`:"100%",height:"100%"},children:i.jsx("canvas",{ref:k,role:"img","aria-label":n||"Chart visualization"})})}),j&&a.labels.length>d&&i.jsxs("div",{className:"chart-data-info",children:["Showing ",a.labels.length," data points (scroll to view all)"]})]}):i.jsxs("div",{className:`chart-wrapper ${x}`,children:[n&&i.jsx("h3",{className:"chart-title",children:n}),i.jsx("div",{className:"chart-empty",children:i.jsx("p",{children:g})})]})};m.propTypes={type:e.oneOf(["bar","line","pie","doughnut","scatter","bubble"]).isRequired,data:e.shape({labels:e.arrayOf(e.string),datasets:e.arrayOf(e.shape({label:e.string,data:e.arrayOf(e.number),backgroundColor:e.oneOfType([e.string,e.arrayOf(e.string)]),borderColor:e.oneOfType([e.string,e.arrayOf(e.string)])}))}).isRequired,options:e.object,title:e.string,enableHorizontalScroll:e.bool,maxDataPoints:e.number,loading:e.bool,error:e.string,emptyMessage:e.string,className:e.string};const g=[{key:"has_readme",label:"README",color:"#28a745"},{key:"has_license",label:"License",color:"#0366d6"},{key:"has_ci_cd",label:"CI/CD",color:"#6f42c1"},{key:"has_tests",label:"Tests",color:"#fd8c73"},{key:"has_docs",label:"Docs",color:"#ffd33d"}];function x({repositories:e,onRepoClick:s,maxRepos:t=15}){if(!e||0===e.length)return i.jsx(m,{type:"bar",data:{labels:[],datasets:[]},emptyMessage:"No repository data available"});const a=[...e].sort((e,s)=>(s.composite_score||0)-(e.composite_score||0)).slice(0,t),r={labels:a.map(e=>e.name),datasets:g.map(e=>({label:e.label,data:a.map(s=>s[e.key]?1:0),backgroundColor:e.color,borderWidth:0,barThickness:20}))},o={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},onClick:(e,t)=>{if(t.length>0&&s){const e=t[0].index;s({fullData:a[e]})}},plugins:{legend:{display:!0,position:"top",labels:{padding:12,font:{size:11},usePointStyle:!0,boxWidth:10}},tooltip:{callbacks:{label:e=>{const s=e.dataIndex,t=a[s],i=g[e.datasetIndex];return`${i.label}: ${t[i.key]?"Yes":"No"}`}}}},scales:{x:{stacked:!0,max:5,grid:{display:!1},ticks:{stepSize:1,callback:e=>e},title:{display:!0,text:"Features Present",font:{size:11}}},y:{stacked:!0,grid:{display:!1},ticks:{font:{size:11},autoSkip:!1}}}};return i.jsx(m,{type:"bar",data:r,options:o,title:"Repository Health (Top 15 by Spark Score)",enableHorizontalScroll:!1,maxDataPoints:t})}x.propTypes={repositories:e.array.isRequired,onRepoClick:e.func,maxRepos:e.number};const b=r.lazy(()=>a(()=>import("./site-CFZyYFYM.js"),__vite__mapDeps([0,1,2,3]))),f=r.lazy(()=>a(()=>import("./site-Cb8s9CfR.js"),__vite__mapDeps([4,1,2,3]))),y=r.lazy(()=>a(()=>import("./site-6iOB5wtc.js"),__vite__mapDeps([5,1,2,3])));function j({repositories:e,profile:s,onRepoClick:a}){const o=r.useMemo(()=>[...e].sort((e,s)=>(s.composite_score||0)-(e.composite_score||0)).map(e=>({name:e.name,value:e.composite_score||0,language:e.language||"Unknown",fullData:e})),[e]),l=r.useMemo(()=>{const s={};return e.forEach(e=>{const t=e.language||"Unknown";s[t]=(s[t]||0)+1}),Object.entries(s).map(([e,s])=>({name:e,value:s})).sort((e,s)=>s.value-e.value)},[e]),n=r.useMemo(()=>e.filter(e=>null!=e.age_days&&null!=e.total_commits).map(e=>({name:e.name,x:e.age_days,y:e.total_commits,r:e.composite_score||0,language:e.language||"Unknown",fullData:e})),[e]),c=r.useMemo(()=>[...e].filter(e=>(e.recent_commits_90d||0)>0).sort((e,s)=>(s.recent_commits_90d||0)-(e.recent_commits_90d||0)).slice(0,15).map(e=>({name:e.name,value:e.recent_commits_90d||0,language:e.language||"Unknown",fullData:e})),[e]),d=e=>{e?.fullData&&a&&a(e.fullData)};return i.jsxs("div",{className:"dashboard-panels",children:[i.jsx(h,{repositories:e,profile:s}),i.jsxs("div",{className:"dashboard-grid",children:[i.jsx("div",{className:"dashboard-panel dashboard-panel--wide",children:i.jsx(r.Suspense,{fallback:i.jsx(t,{message:"Loading chart..."}),children:i.jsx(b,{data:o,metricLabel:"Spark Score",onBarClick:d,horizontal:!0,maxBars:36})})}),i.jsx("div",{className:"dashboard-panel",children:i.jsx(r.Suspense,{fallback:i.jsx(t,{message:"Loading chart..."}),children:i.jsx(f,{data:l,title:"Language Distribution",doughnut:!0,cutout:50})})}),i.jsx("div",{className:"dashboard-panel dashboard-panel--wide",children:i.jsx(r.Suspense,{fallback:i.jsx(t,{message:"Loading chart..."}),children:i.jsx(y,{data:n,xAxisLabel:"Repository Age (days)",yAxisLabel:"Total Commits",sizeLabel:"Spark Score",onPointClick:d})})}),i.jsx("div",{className:"dashboard-panel",children:i.jsx(r.Suspense,{fallback:i.jsx(t,{message:"Loading chart..."}),children:i.jsx(b,{data:c,metricLabel:"Commits (Last 90 Days)",onBarClick:d,horizontal:!0,maxBars:15})})}),i.jsx("div",{className:"dashboard-panel dashboard-panel--wide",children:i.jsx(x,{repositories:e,onRepoClick:d,maxRepos:15})})]}),i.jsxs("div",{className:"spark-score-explainer",children:[i.jsx("h3",{children:"How the Spark Score Works"}),i.jsx("p",{children:"The Spark Score is a composite metric (0–100) that ranks repositories across three weighted dimensions:"}),i.jsxs("div",{className:"score-factors",children:[i.jsxs("div",{className:"score-factor",children:[i.jsxs("div",{className:"score-factor-header",children:[i.jsx("span",{className:"score-factor-weight",children:"45%"}),i.jsx("strong",{children:"Activity"})]}),i.jsx("p",{children:"Measures commit frequency across three time windows: 90 days (50%), 180 days (30%), and 365 days (20%). A recency bonus of up to +30 points rewards repos pushed within the last week, while repos inactive for over a year receive a penalty."})]}),i.jsxs("div",{className:"score-factor",children:[i.jsxs("div",{className:"score-factor-header",children:[i.jsx("span",{className:"score-factor-weight",children:"30%"}),i.jsx("strong",{children:"Popularity"})]}),i.jsx("p",{children:"Uses logarithmic scaling of stars, forks, and watchers (weighted 1.0, 0.5, 0.3 respectively). The log scale ensures that a repo with 10 stars still scores meaningfully while preventing mega-repos from dominating."})]}),i.jsxs("div",{className:"score-factor",children:[i.jsxs("div",{className:"score-factor-header",children:[i.jsx("span",{className:"score-factor-weight",children:"25%"}),i.jsx("strong",{children:"Health"})]}),i.jsx("p",{children:"Evaluates documentation (README presence), maturity (age + commit count), issue management (open issues vs. recent commits), and community engagement (fork-to-star ratio)."})]})]}),i.jsx("h4",{children:"How to Improve Your Score"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Commit regularly"})," — Recent, consistent activity in the last 90 days has the highest impact on the Activity component."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Push frequently"})," — Repos pushed within the last 7 days get a +30 recency bonus; after 6 months the score drops sharply."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Add a README"})," — Worth 30 of the 100 Health points. The simplest single improvement you can make."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Grow the community"})," — Stars, forks, and watchers all feed the Popularity score. Open-source visibility matters."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Manage issues"})," — A low ratio of open issues to recent commits signals a well-maintained project."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Avoid archiving"})," — Archived repos receive a 50–90% penalty. Keep projects active or clearly sunset them."]})]})]})]})}j.propTypes={repositories:e.array.isRequired,profile:e.object,onRepoClick:e.func};const v=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{m as C,v as D,c as g};
