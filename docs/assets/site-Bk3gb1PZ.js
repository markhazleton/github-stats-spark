import{r as e,j as s}from"./site-DnIXTUhv.js";import{c as a,f as l,a as i,P as m}from"./site-44lG4pNm.js";import"./site-Dp0kJvEn.js";const o="ComparisonView-module__comparisonView___7Wgyd",r="ComparisonView-module__comparisonGrid___lo8Mf",t="ComparisonView-module__headerRow___FuxVa",n="ComparisonView-module__metricLabel___85ZOX",_="ComparisonView-module__repoHeader___Rhdap",c="ComparisonView-module__repoName___8ZMTK",d="ComparisonView-module__removeButton___3w-Ur",p="ComparisonView-module__metricRow___5cwXu",u="ComparisonView-module__metricValue___PHCB8",y="ComparisonView-module__value___Gm2To",h="ComparisonView-module__percentDiff___1IFV5",b="ComparisonView-module__highest___v7-c0",x="ComparisonView-module__lowest___HPYCH",w="ComparisonView-module__middle___8Bg6w",v="ComparisonView-module__emptyState___YZwIB",j="ComparisonView-module__legend___p-YKs",C="ComparisonView-module__legendItem___8VHqG",N="ComparisonView-module__legendBox___2tF4F",V="ComparisonView-module__legendNote___swlUx";function k({repositories:m,onRemoveRepo:k}){const g=e.useMemo(()=>[{key:"stars",label:"Stars",type:"number"},{key:"forks",label:"Forks",type:"number"},{key:"watchers",label:"Watchers",type:"number"},{key:"open_issues",label:"Open Issues",type:"number"},{key:"size_kb",label:"Size (KB)",type:"number"},{key:"commit_history.total_commits",label:"Total Commits",type:"number"},{key:"commit_history.recent_90d",label:"Commits (90d)",type:"number"},{key:"commit_metrics.avg_size",label:"Avg Commit Size",type:"number"},{key:"commit_velocity",label:"Commit Velocity",type:"number",decimals:2},{key:"age_days",label:"Age (days)",type:"number"},{key:"days_since_last_push",label:"Days Since Push",type:"number"},{key:"language",label:"Language",type:"string"},{key:"created_at",label:"Created",type:"date"},{key:"updated_at",label:"Last Updated",type:"date"},{key:"has_readme",label:"Has README",type:"boolean"},{key:"has_license",label:"Has License",type:"boolean"},{key:"has_ci_cd",label:"Has CI/CD",type:"boolean"},{key:"has_tests",label:"Has Tests",type:"boolean"}],[]),f=e.useMemo(()=>0===m.length?[]:g.map(e=>{const s=m.map(s=>{return a=s,e.key.split(".").reduce((e,s)=>e?.[s],a);var a});let a=null,l=null;if("number"===e.type){const e=s.filter(e=>null!=e&&!isNaN(e));e.length>0&&(a=Math.min(...e),l=Math.max(...e))}return{metric:e,values:s,min:a,max:l}}),[m,g]),R=(e,s,a=0)=>{if(null==e||void 0===e)return"N/A";switch(s){case"number":return i(e,a);case"date":return l(e);case"boolean":return e?"✓":"✗";default:return String(e)}};return 0===m.length?s.jsxs("div",{className:v,children:[s.jsx("p",{children:"No repositories selected for comparison."}),s.jsx("p",{className:"text-muted text-sm",children:"Select 2 or more repositories from the table to compare their metrics."})]}):s.jsxs("div",{className:o,children:[s.jsxs("div",{className:r,children:[s.jsxs("div",{className:t,children:[s.jsx("div",{className:n,children:"Metric"}),m.map(e=>s.jsxs("div",{className:_,children:[s.jsx("div",{className:c,children:e.name}),s.jsx("button",{className:d,onClick:()=>k(e.name),"aria-label":`Remove ${e.name} from comparison`,title:`Remove ${e.name}`,children:"×"})]},e.name))]}),f.map(e=>s.jsxs("div",{className:p,children:[s.jsx("div",{className:n,children:e.metric.label}),e.values.map((l,i)=>{const m=((e,s,a,l)=>"number"!==l||null==e||s===a?"":e===a?b:e===s?x:w)(l,e.min,e.max,e.metric.type),o="number"===e.metric.type&&null!=e.max&&null!=l?a(l,e.max):null;return s.jsxs("div",{className:`${u} ${m}`,children:[s.jsx("div",{className:y,children:R(l,e.metric.type,e.metric.decimals)}),null!==o&&0!==o&&s.jsxs("div",{className:h,children:[o>0?"+":"",o,"%"]})]},i)})]},e.metric.key))]}),s.jsxs("div",{className:j,children:[s.jsxs("div",{className:C,children:[s.jsx("span",{className:`${N} ${b}`}),s.jsx("span",{children:"Highest Value"})]}),s.jsxs("div",{className:C,children:[s.jsx("span",{className:`${N} ${x}`}),s.jsx("span",{children:"Lowest Value"})]}),s.jsx("div",{className:C,children:s.jsx("span",{className:V,children:"Percentage shows difference from maximum value"})})]})]})}k.propTypes={repositories:m.arrayOf(m.object).isRequired,onRemoveRepo:m.func.isRequired};export{k as default};
